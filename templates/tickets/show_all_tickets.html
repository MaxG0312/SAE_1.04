{% extends 'layout.html' %}

{% block title %}
<title>Tickets d'incidents</title>
{% endblock %}

{% block body %}
<h3 class="title_tickets">Dashboard des Tickets et Incidents</h3>
<hr>
<div class="table-responsive">
    <h3>Résumé des statuts</h3>
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Statut</th>
                <th>Nombre de tickets</th>
            </tr>
        </thead>
        <tbody>
            {% if ticket_counter | length >= 1 %}
            {% for ligne in ticket_counter %}
            <tr>
                <td style="color: red;">Tickets en attente / a traiter</td>
                <td>{{ ligne['nombre_ticket_en_attente'] }}</td>
            </tr>
            <tr>
                <td style="color : orange;">Tickets en cours</td>
                <td>{{ ligne['nombre_ticket_en_cours'] }}</td>
            </tr>
            <tr>
                <td style="color: green;">Tickets résolus</td>
                <td>{{ ligne['nombre_ticket_resolu'] }}</td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
</div>
<hr>
<div class="table-responsive">
    <h3>Tous les tickets</h3>
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Id</th>
                <th>Description</th>
                <th>Date</th>
                <th>Statut</th>
                <th>Parcelle concernée</th>
            </tr>
        </thead>
        <tbody>
            {% if ticket_incident | length >= 1 %}
            {% for ligne in ticket_incident %}
            <tr>
                <td>{{ ligne.id }}</td>
                <td>{{ ligne.description }}</td>
                <td>{{ ligne.date }}</td>
                <td>{{ ligne.statut }}</td>
                <td>Parcelle <span style="color : green;">{{ ligne.parcelle }}</span> : {{ ligne.adresse }}</td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
</div>
<hr>
<h3>Tickets en cours </h3>
<div class="table-responsive">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Id</th>
                <th>Description</th>
                <th>Date</th>
                <th>Statut</th>
                <th>Parcelle concernée</th>
            </tr>
        </thead>
        <tbody>
            {% if ticket_counter | length >= 1 %}
            {% for ligne in ticket_counter %}
            <tr>
                <td>{{ ligne }}</td>
                <td>{{ ligne.description }}</td>
                <td>{{ ligne.date }}</td>
                <td>{{ ligne.statut }}</td>
                <td>Parcelle <span style="color : green;">{{ ligne.parcelle }}</span> : {{ ligne.adresse }}</td>
            </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>

{% endblock %}